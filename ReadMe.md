–î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã —Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ —Ö–æ—Å—Ç—É –≤–≤–µ–¥–∏—Ç–µ 

> ssh omonako@95.182.117.114

–ü–∞—Ä–æ–ª—å –±—É–¥–µ—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –æ—Ç–¥–µ–ª—å–Ω–æ (—Å–ø—Ä–æ—Å–∏—Ç–µ —É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞)


–ö–∞–∫ —Ç–æ–ª—å–∫–æ –ø–æ–ª—É—á–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–µ—Ä—É, –∏–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª

> ~/work/socialVPN/


–û–Ω–æ —Ö—Ä–∞–Ω–∏—Ç –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ –∏ —Ñ–∞–π–ª—ã-–∫–ª—é—á–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ 


---

````markdown
# VPN Server Setup: WireGuard + V2Ray + Split-Tunneling

–≠—Ç–æ—Ç —Å–µ—Ä–≤–µ—Ä –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ VPN-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ, –Ω–∞–ø—Ä–∞–≤–ª—è—è —Ç—Ä–∞—Ñ–∏–∫ —Ç–æ–ª—å–∫–æ –∫ –Ω—É–∂–Ω—ã–º —Å–µ—Ä–≤–∏—Å–∞–º —á–µ—Ä–µ–∑ —Ç—É–Ω–Ω–µ–ª—å. –û—Å—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–ø—Ä—è–º—É—é, –±–µ–∑ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ VPN.

## üìå –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- **VPN —Ç–∏–ø**: WireGuard (UDP) + V2Ray (Shadowsocks)
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: Netdata (Web UI)
- **Split-Tunneling**: –¢—Ä–∞—Ñ–∏–∫ –∫ Google, YouTube, Instagram, OpenAI –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ VPN
- **–û—Å—Ç–∞–ª—å–Ω–æ–π —Ç—Ä–∞—Ñ–∏–∫**: –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–ø—Ä—è–º—É—é
- **–°–µ—Ä–≤–µ—Ä IP**: `95.182.117.114`

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞ (–Ω–∞ Ubuntu —Å–µ—Ä–≤–µ—Ä–µ)

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç `setup_vpn.sh` –Ω–∞ —Å–µ—Ä–≤–µ—Ä.
2. –°–¥–µ–ª–∞–π—Ç–µ –µ–≥–æ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º:

```bash
chmod +x setup_vpn.sh
````

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –æ—Ç –∏–º–µ–Ω–∏ root:

```bash
sudo ./setup_vpn.sh
```

## üì± –ö–ª–∏–µ–Ω—Ç—ã WireGuard

### iPhone

* –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ [WireGuard](https://apps.apple.com/us/app/wireguard/id1441195209)
* –û—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ QR-–∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –ø–æ—è–≤–∏—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª–∏

–ò–õ–ò

* –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –≤—Ä—É—á–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–∑ —Ñ–∞–π–ª–∞ `wg-client-iPhone.conf`

### OpenWRT

* –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–∞–∫–µ—Ç—ã:

```bash
opkg update
opkg install wireguard luci-proto-wireguard vpn-policy-routing
```

* –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `wg-client-OpenWRT.conf`

## üß≠ Split Tunneling

–¢–æ–ª—å–∫–æ —Ç—Ä–∞—Ñ–∏–∫ –∫ —Å–ª–µ–¥—É—é—â–∏–º —Å–µ—Ä–≤–∏—Å–∞–º –∏–¥—ë—Ç —á–µ—Ä–µ–∑ VPN:

* Google (–≤–∫–ª—é—á–∞—è YouTube)
* Instagram
* OpenAI
* Cloudflare CDN

–û—Å—Ç–∞–ª—å–Ω–æ–π —Ç—Ä–∞—Ñ–∏–∫ –∏–¥—ë—Ç –Ω–∞–ø—Ä—è–º—É—é.

## üåê Shadowsocks (—á–µ—Ä–µ–∑ V2Ray)

* **Server**: `95.182.117.114`
* **Port**: `2345`
* **Method**: `chacha20-ietf-poly1305`
* **Password**: –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω –≤ –∫–æ–Ω—Å–æ–ª–∏ –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

Netdata –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ —Å—Å—ã–ª–∫–µ:

[http://95.182.117.114:19999](http://95.182.117.114:19999)

## üîÑ –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è VPN

```bash
# WireGuard
sudo systemctl status wg-quick@wg0
sudo systemctl restart wg-quick@wg0
sudo wg show wg0

# V2Ray (Shadowsocks)
sudo systemctl status v2ray
sudo systemctl restart v2ray
sudo journalctl -u v2ray --follow

# Netdata
sudo systemctl status netdata
```

## üìÅ –§–∞–π–ª—ã

| –§–∞–π–ª                             | –û–ø–∏—Å–∞–Ω–∏–µ                         |
| -------------------------------- | -------------------------------- |
| /etc/wireguard/wg0.conf          | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞ WireGuard   |
| wg-client-iPhone.conf            | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞ iPhone      |
| wg-client-OpenWRT.conf           | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞ OpenWRT     |
| /usr/local/etc/v2ray/config.json | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Shadowsocks (V2Ray) |

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

* –ö–ª—é—á–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏ –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —Ç—Ä–µ—Ç—å–∏–º –ª–∏—Ü–∞–º
* –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è IP-–¥–∏–∞–ø–∞–∑–æ–Ω—ã —Å–µ—Ä–≤–∏—Å–æ–≤ –¥–ª—è split-tunnel
* Netdata –æ—Ç–∫—Ä—ã—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ (–±–µ–∑ –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–∏—Å—Ç–µ–º–µ)


## –ö–∞–∫ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –∞–¥—Ä–µ—Å–∞ (–Ω–∞ –ø—Ä–∏–º–µ—Ä–µ twitter)

–£–∑–Ω–µ–º ASN –¥–ª—è twitter. Google —Å–∫–∞–∂–µ—Ç ASN 13414 </br>

–¢–µ–ø–µ—Ä—å —Å–æ–∑–¥–∞—ë–º –∞–π–ø–∏ —Ñ–∞–π–ª 
>> whois -h whois.radb.net -- '-i origin ASN13414' | grep ^route | awk '{print $2}' > twitter.txt


–æ—Ç–∫—Ä—ã–≤–µ–º –∏ —Ä–µ–¥–∞–π—Ç–∏—Ä—É–µ–º —Ñ–∞–π–ª /home/omonako/work/addaddress.sh

–£–∫–∞–∑—ã–≤–∞–µ–º –ø—É—Ç—å –Ω–∞—à–µ–≥–æ twitter.txt –≤ –∫–æ–Ω—Ü–µ –≤–º–µ—Å—Ç–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∞–¥—Ä—É—Å–∞ –¥—Ä—É–≥–æ–≥–æ —Ñ–∞–π–ª–∞

–¥–æ–ª–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—Å—è –≤–æ—Ç —Ç–∞–∫

>> while read ip; do   ip rule add to "$ip" table vpn; done < twitter.txt


—Å–æ—Ö—Ä–∞—è–Ω–µ–º –∏ –∑–∞–ø—É—Å–∫–∞–µ–º —Ñ–∞–π–ª

sudo /home/omonako/work/addaddress.sh

